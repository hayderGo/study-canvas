<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <title>Title</title>
   <style>
      #canvas {
         border: 1px solid #000;
      }
   </style>
</head>
<body>
<canvas id="canvas" width=400 height=400></canvas>
<script src="./utils.js"></script>
<script>
  function Arrow() {
    this.x = 0;
    this.y = 0;
    this.color = '#ffff00';
    this.rotation = 0;
  }
  Arrow.prototype.draw = function (context) {
    context.save();
    context.translate(this.x, this.y);
    context.rotate(this.rotation);
    context.lineWidth = 2;
    context.fillStyle = this.color;
    context.beginPath();
    context.moveTo(-50, -25);
    context.lineTo(0, -25);
    context.lineTo(0, -50);
    context.lineTo(50, 0);
    context.lineTo(0, 50);
    context.lineTo(0, 25);
    context.lineTo(-50, 25);
    context.lineTo(-50, -25);
    context.closePath();
    context.fill();
    context.stroke();
    context.restore();
  };
  
  function Ball(radius, color) {
    if (typeof radius === 'undefined') {
      radius = 40;
    }
    if (typeof color === 'undefined') {
      color = '#FF0000';
    }
    this.x = 0;
    this.y = 0;
    this.radius = radius;
    this.color = color;
    this.scaleX = 1;
    this.scaleY = 1;
    this.rotation = 0;
    this.lineWidth = 1;
  }
  Ball.prototype.draw = function (context) {
    context.save();
    context.translate(this.x, this.y);
    context.rotate(this.rotation);
    context.scale(this.scaleX, this.scaleY);
    context.lineWidth = this.lineWidth;
    context.fillStyle = this.color;
    context.beginPath();
    context.arc(0, 0, this.radius, 0, (Math.PI * 2), true);
    context.closePath();
    context.fill();
    if (this.lineWidth > 0) {
      context.stroke();
    }
    context.restore();
  };
  
  window.onload = function () {
    var canvas = document.getElementById('canvas'),
        context = canvas.getContext('2d'),
        mouse = utils.captureMouse(canvas);
//    var arrow = new Arrow();
//    arrow.x = canvas.width / 2;
//    arrow.y = canvas.height / 2;
//    (function drawArrowFrame() {
//      requestAnimationFrame(drawArrowFrame, canvas);
//      context.clearRect(0, 0, canvas.width, canvas.height);
//      var dx = mouse.x - arrow.x;
//      var dy = mouse.y - arrow.y;
//      arrow.rotation = Math.atan2(dy, dx);
//      arrow.draw(context);
//    }());

//    var ball = new Ball(),
//        angle = 0,
//        centerScale = 1,
//        range = 0.5,
//        speed = 0.05;
//    ball.x = canvas.width / 2;
//    ball.y = canvas.height / 2;
//    (function drawBallFrame() {
//      requestAnimationFrame(drawBallFrame, canvas);
//      context.clearRect(0, 0, canvas.width, canvas.height);
//      ball.scaleX = ball.scaleY = centerScale + Math.sin(angle) * range;
//      angle += speed;
//      ball.draw(context);
//    }());

//    var ball = new Ball(),
//        centerX = canvas.width / 2,
//        centerY = canvas.height / 2,
//        angleX = 0,
//        angleY = 0,
//        range = 50,
//        speedX = 0.07,
//        speedY = 0.11;
//    ball.x = canvas.width / 2;
//    ball.y = canvas.height / 2;
//    (function drawBallFrame() {
//      requestAnimationFrame(drawBallFrame, canvas);
//      context.clearRect(0, 0, canvas.width, canvas.height);
//      ball.x = centerX + Math.sin(angleX) * range;
//      ball.y = centerY + Math.sin(angleY) * range;
//      angleX += speedX;
//      angleY += speedY;
//      ball.draw(context);
//    }());
    
    var centerY = canvas.height / 2,
        angle = 0,
        range = 50,
        speedX = 1,
        speedY = 0.05,
        xPos = 0,
        yPos = centerY;
    
    (function drawFrame() {
      requestAnimationFrame(drawFrame, canvas);
//      context.clearRect(0, 0, canvas.width, canvas.height);
      context.beginPath();
      context.moveTo(xPos, yPos);
      xPos += speedX;
      angle += speedY;
      yPos = centerY + Math.sin(angle) * range;
      context.lineTo(xPos, yPos);
      context.stroke();
    }());
  };
</script>
</body>
</html>